[TOC]

***ç”±äºé‡‡ç”¨ Typora ä¹¦å†™ï¼Œgithub ä¸æ”¯æŒéƒ¨åˆ†æ ¼å¼ï¼Œå»ºè®® clone åç”¨ Typora è§‚çœ‹***

# è‡ªå®šä¹‰Viewä¸åŠ¨ç”»

## ä¸€ã€è‡ªå®šä¹‰View

### 1ã€ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ï¼Ÿ

> ä¸€å¥è¯ï¼šå®˜æ–¹çš„æ§ä»¶æ»¡è¶³ä¸äº†äº§å“æƒ³è¦çš„æ•ˆæœ (
>
> ä½†å…¶å®ï¼Œå®˜æ–¹æ§ä»¶å·²ç»èƒ½æ»¡è¶³ç»å¤§å¤šæ•°éœ€æ±‚äº†ï¼Œæ­£å¸¸æƒ…å†µä¸‹è‡ªå®šä¹‰ View æ˜¯ä¸‹ä¸‹ç­–ï¼Œå› ä¸ºé€ è‡ªå®šä¹‰ View çš„è½®å­æ˜¯ä¸€ä»¶å¾ˆè€—æ—¶ä¹Ÿå¾ˆè€—ç²¾åŠ›çš„äº‹ã€‚
>
> è¿™é‡Œåˆ†äº«ä¸€ä¸‹æˆ‘å¤§ä¸€æš‘å‡æ—¶é‡åˆ°çš„äº‹æƒ…ï¼Œå½“æ—¶å…± 5 ä¸ªç»„åˆ†å¼€åšç§¯åˆ†å•†åŸï¼Œäº§å“ç»™äº†ä¸€ä¸ªç§¯åˆ†å•†åŸçš„è®¾è®¡å›¾ï¼Œå…¶ä¸­ä¸»é¡µæœ‰ä¸€ä¸ªä¸Šæ»‘å±•å¼€çš„éœ€æ±‚ï¼Œæˆ‘ä»¬ç»„ï¼ˆæˆ‘å’Œé’Ÿæ™ºï¼‰ï¼Œæˆ‘å°±è´Ÿè´£åšè¿™ä¸ªä¸Šæ»‘çš„ç•Œé¢ã€‚å½“æ—¶æˆ‘èŠ±äº†å¥½åƒ 3ã€4 å¤©çš„æ—¶é—´å»è®¾è®¡ä¸€ä¸ªè‡ªå®šä¹‰ Viewï¼ˆåŸè°…æˆ‘å½“æ—¶è¿˜ä¸çŸ¥é“åè°ƒè€…å¸ƒå±€è¿™ä¸ªä¸œè¥¿ï¼‰ï¼Œç»“æœå•Šï¼Œäº§å“æ”¹éœ€æ±‚äº†ï¼Œé 
>
> ç»è¿‡ä¸Šé¢çš„è¿™ä¸ªæ•…äº‹åï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥ç†è§£åˆ°äº†é€‰æ‹©è‡ªå®šä¹‰ View ä¼šé¢ä¸´çš„é£é™©
>
> åæ¥æˆ‘åˆèŠ±äº†æ¥è¿‘ä¸€å‘¨çš„æ—¶é—´è¿˜æ˜¯ç”¨è‡ªå®šä¹‰ View å†™å‡ºäº†äº§å“çš„æ–°éœ€æ±‚ï¼Œé™äºå½“æ—¶æˆ‘çš„èƒ½åŠ›ï¼Œç°åœ¨å»çœ‹å½“æ—¶å†™çš„ä»£ç ï¼Œå­˜åœ¨ä¸€äº›è€¦åˆçš„åœ°æ–¹ï¼Œç®—æ˜¯ç»™ä»¥åå­¦å¼Ÿç•™å‘äº†ğŸ˜
>
> OKï¼Œå›åˆ°è¿™é‡Œï¼Œè‡ªå®šä¹‰ View ç¡®å®æ˜¯ä¸‹ä¸‹ç­–ï¼Œä¸æ­¢ä¼šå½±å“ä½ çš„å¿ƒæƒ…ï¼Œå¦‚æœä½ çš„ä»£ç è®¾è®¡å¾—ä¸å¥½çš„è¯ï¼ˆæ¯”å¦‚è€¦åˆåº¦å¾ˆé«˜ï¼Œä»£ç é€»è¾‘æ··ä¹±ï¼‰ï¼Œè¿˜ä¼šå½±å“ä»¥åç»´æŠ¤ä»£ç äººçš„å¿ƒæƒ…ã€‚ï¼ˆè¯´ä¸ªç¬‘è¯ï¼šå¬è¯´ä»£ç å†™å¾—è¶Šçƒ‚ï¼Œè¶Šä¸å®¹æ˜“è¢«è¾é€€ :ï¼‰

### 2ã€åˆ†ç±»

> è¿™é‡Œè‡ªå®šä¹‰ View æ˜¯ä¸€ä¸ªä¹ æƒ¯æ€§çš„ç»Ÿç§°
>
> å¦‚æœæŒ‰ç…§ç±»å‹æ¥åˆ†ï¼š
>
> - è‡ªå®šä¹‰ View
>
>   > æŒ‡ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿äº View çš„æ§ä»¶ï¼Œå¦‚ï¼šTextViewã€Button
>   >
>   > ```java
>   > public class TextView extends View {}
>   > ```
>   >
>   > ```java
>   > public class Button extends TextView {}
>   > ```
>   >
>   > 
>
> - è‡ªå®šä¹‰ ViewGroup
>
>   > ```java
>   > public class LinearLayout extends ViewGroup {}
>   > ```
>   >
>   > ```java
>   > public class FrameLayout extends ViewGroup {}
>   > ```
>
> 
>
> å¦‚æœæŒ‰ç…§å­¦ä¹ çš„å†…å®¹æ¥åˆ†ï¼Œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹å†…å®¹
>
> - View çš„æµ‹é‡ä¸å¸ƒå±€
>
>   > æµ‹é‡å°±æ˜¯ä¸ Measure ç›¸å…³çš„æ–¹æ³•ï¼Œå¦‚ï¼š`onMeasure()`
>   >
>   > å¸ƒå±€å°±æ˜¯ä¸ Layout ç›¸å…³çš„æ–¹æ³•ï¼Œå¦‚ï¼š`onLayout()`
>   >
>   > è¿™ä¸¤ä¸ªä¸€èˆ¬æ˜¯åœ¨ä¸€èµ·è°ƒç”¨çš„ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯åœ¨ è‡ªå®šä¹‰ ViewGroup ä¸­æ‰ä¼šæ¶‰åŠåˆ°ï¼ˆView ä¸­ä¹Ÿå¯ä»¥å®ç°ï¼Œæ¯”å¦‚ TextView å°±é‡å†™äº† `onLayout()` æ–¹æ³•ï¼‰
>
> - View çš„ç»˜åˆ¶
>
>   > ç»˜åˆ¶å°±æ˜¯ä¸ Draw ç›¸å…³çš„æ–¹æ³•ï¼Œå¦‚ï¼š`onDraw()`
>   >
>   > ä¸ºä»€ä¹ˆè¦åˆ—å‡ºç»˜åˆ¶ï¼Ÿ
>   >
>   > å› ä¸ºå¾ˆå¤šåŠ¨ç”»éƒ½æ˜¯ä¾é é‡å†™ç»˜åˆ¶æ¥å®ç°çš„ï¼Œæ‰€ä»¥ç»˜åˆ¶ä¹Ÿæ¯”è¾ƒé‡è¦
>
> - äº‹ä»¶åˆ†å‘
>
>   >ä¸€èˆ¬æŒ‡è§¦æ‘¸äº‹ä»¶çš„åˆ†å‘
>   >
>   >è¿™ä¸ªåº”è¯¥æ˜¯è‡ªå®šä¹‰ View ä¸­æœ€éš¾ä¹Ÿæœ€é‡è¦çš„å†…å®¹äº†ï¼Œå¦‚æœä½ æƒ³è®¾è®¡å‡ºä¸€äº›å¾ˆç‚«é…·çš„ç•Œé¢ï¼Œå°±å¾—ç²¾é€šäº‹ä»¶åˆ†å‘
>   >
>   >äº‹ä»¶åˆ†å‘ä¼šåœ¨ä¸‹ä¸‹èŠ‚è¯¾è®²è§£
>
> æ¥ä¸‹æ¥å°±æ˜¯æ­£å¼å¼€å§‹è®²è§£è‡ªå®šä¹‰ View çš„æ—¶é—´ï¼Œç”±äºæ—¶é—´åŸå› ï¼Œåœ¨åŠ ä¸Šä½ ä»¬çš„ç°é˜¶æ®µèƒ½åŠ›çš„åŸå› ï¼Œæœ¬èŠ‚è¯¾æ›´åå‘äºè®²è§£å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ Viewï¼Œè€Œä¸æ˜¯è®²è§£åº•å±‚å†…å®¹ï¼Œåº•å±‚å†…å®¹ä»¥åšå®¢çš„å½¢å¼åˆ†äº«

### 3ã€æ„é€ å‡½æ•°

> è¯¥éƒ¨åˆ†å†…å®¹å‚è€ƒï¼šhttps://www.cnblogs.com/angeldevil/p/3479431.html#three
>
> View ä¸€å…±æœ‰å››ä¸ªæ„é€ å‡½æ•°
>
> ```java
> public class View {
>  // è¿™ä¸ªç”¨äºåœ¨ä»£ç ä¸­ç›´æ¥ new ä¸€ä¸ª Viewï¼Œè¿™ä¸ª context ä¸€èˆ¬éƒ½æ˜¯ activityï¼Œä»£è¡¨ä¸Šä¸‹æ–‡
>  public View(Context context)
> 
>  // è¿™ä¸ªç”¨äºåœ¨ xml ä¸­ä¹¦å†™ï¼Œç³»ç»Ÿè‡ªåŠ¨å°†ä½ å†™åœ¨ xml ä¸­çš„å±æ€§è£…æ¢ä¸ºä¸€ä¸ª AttributeSet å¯¹è±¡ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªå‡½æ•°
>  public View(
>   Context context, 
>   @Nullable AttributeSet attrs
>  )
> 
>  // è¿™ä¸ªä¸€èˆ¬ç”¨äºè®¾ç½®é»˜è®¤å±æ€§ï¼Œä½¿ç”¨çš„æƒ…å†µè¾ƒå°‘
>  // ç³»ç»Ÿä¸ä¼šä¸»åŠ¨è°ƒç”¨ï¼Œä¸€èˆ¬æ˜¯å¼€å‘è€…è‡ªå·±è®¾ç½®
>  public View(
>   Context context, 
>   @Nullable AttributeSet attrs, 
>   int defStyleAttr
>  )
> 
>  // è¿™ä¸ªä¸ä¸Šé¢çš„ç±»ä¼¼ï¼Œä¹Ÿæ˜¯è®¾ç½®é»˜è®¤å±æ€§ï¼Œä½¿ç”¨çš„æƒ…å†µä¹Ÿè¾ƒå°‘ï¼Œä¸”åªæ”¯æŒ Android 5.0 ä»¥ä¸Š
>  // ç³»ç»Ÿä¸ä¼šä¸»åŠ¨è°ƒç”¨
>  public View(
>   Context context, 
>   @Nullable AttributeSet attrs, 
>   int defStyleAttr, 
>   int defStyleRes
>  )
> }
> 
> ```
>
> å‰é¢ä¸¤ä¸ªæ„é€ å‡½æ•°å„ä½åº”è¯¥éƒ½èƒ½çœ‹æ‡‚ï¼Œå…³é”®åœ¨äºåé¢ä¸¤ä¸ªï¼Œä»–ä»¬ä¸è®¾ç½®é»˜è®¤å±æ€§ç›¸å…³ï¼Œåœ¨è®²è§£å‰æˆ‘ä»¬å…ˆå¾—çŸ¥é“ä¸€ä¸ª View å¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼è®¾ç½®å±æ€§
>
> ### 1ã€ç›´æ¥å†™åœ¨ XML ä¸­
>
> > ```xml
> > <androidx.cardview.widget.CardView
> >  android:layout_width="200dp"
> >  android:layout_height="200dp"
> >  app:cardBackgroundColor="@android:color/darker_gray"
> >  app:cardCornerRadius="8dp"/>
> > ```
> >
> > è¿™æ ·å°±ä¼šç»™å½“å‰ View è®¾ç½®å±æ€§
> >
> > åŸç†æ˜¯ç³»ç»Ÿè‡ªåŠ¨æŠŠè¿™äº›å±æ€§å†™å…¥åˆ° AttributeSet ç±»é‡Œé¢ï¼Œç„¶åè°ƒç”¨
> >
> > ```java
> > public View(Context context, @Nullable AttributeSet attrs)
> > ```
> >
> > æ¥ç”Ÿæˆ View å¯¹è±¡
>
> ### 2ã€ä½¿ç”¨ @style è®¾ç½®å±æ€§
>
> > åœ¨ `style.xml` ä¸­ï¼š
> >
> > ```xml
> > <style name="myCardView_style">
> >     <item name="cardBackgroundColor">@android:color/darker_gray</item>
> >     <item name="cardCornerRadius">8dp</item>
> > </style>
> > ```
> >
> > åœ¨ `layout.xml` ä¸­ï¼š
> >
> > ```xml
> > <androidx.cardview.widget.CardView
> >     android:layout_width="200dp"
> >     android:layout_height="200dp"
> >     style="@style/myCardView_style"/>
> > ```
> >
> > è¿™ä¸ªä¸€èˆ¬ç”¨äºå¤šä¸ªç›¸åŒæ§ä»¶å¤ç”¨å±æ€§çš„æ—¶å€™
> >
> > åŸç†ä¸ä¸Šä¸€ä¸ªæ˜¯ä¸€æ ·çš„ï¼Œå®ƒä¼šæŠŠ `style="@style/MyCardView"` é‡Œå†™çš„å±æ€§ä¸€èµ·å†™å…¥ AttributeSet ç±»é‡Œé¢
> >
> > > é—®é¢˜ï¼šå¦‚æœ `style="@style/MyCardView"` ä¸ xml ä¸­æœ‰ç›¸åŒå±æ€§å®ƒä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ
> > >
> > > ç»è¿‡æµ‹è¯•åï¼Œxml ä¸­å®šä¹‰çš„å±æ€§ä¼šè¦†ç›– `style="@style/MyCardView"` ä¸­å®šä¹‰çš„å±æ€§
> >
> > 
>
> ### 3ã€åœ¨ theme ä¸­è®¾ç½®æŸç§æ§ä»¶çš„é»˜è®¤å±æ€§
>
> > åœ¨ `theme.xml` ä¸­ï¼š
> >
> > ```xml
> > <style name="MyAppTheme" parent="Theme.MaterialComponents">
> >     <!--ä¸‹é¢è¿™ä¸ª @style/MyCardView å°±æ˜¯å‰é¢å†™çš„ <style name="MyCardView">-->
> >     <item name="cardViewStyle">@style/myCardView_style</item>
> > </style>
> > ```
> >
> > > è¿™é‡Œ `name="cardViewStyle"` æ„æ€æ˜¯å®šä¹‰ CardView çš„é»˜è®¤å±æ€§
> > > è¿™ä¸ªé»˜è®¤å±æ€§æ˜¯å¦‚ä½•ç”Ÿæ•ˆçš„å‘¢ï¼Ÿ
> > >
> > > ```java
> > > // åŸå› åœ¨äº CardView çš„æ„é€ å‡½æ•°
> > > public CardView(
> > >     @NonNull Context context, 
> > >     @Nullable AttributeSet attrs
> > > ) {
> > >     this(context, attrs, R.attr.cardViewStyle);
> > > }
> > > 
> > > public CardView(
> > >     @NonNull Context context, 
> > >     @Nullable AttributeSet attrs, 
> > >     int defStyleAttr
> > > ) {
> > >     super(context, attrs, defStyleAttr);
> > > }
> > > ```
> > >
> > > è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ä½¿ç”¨äº† `this(context, attrs, R.attr.cardViewStyle)` è°ƒç”¨äº†ä¸‰ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå…¶ä¸­ä»–ç»™ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥äº†ä¸€ä¸ªå€¼ `R.attr.cardViewStyle`ï¼Œæˆ‘ä»¬å»æ‰’å®ƒæºç ï¼Œçœ‹ä¸‹è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼ˆç›´æ¥ç‚¹å‡»å¯¼åŒ…ä¸­çš„ `import androidx.cardview.R` å°±å¯ä»¥è·³åˆ°æºç ä¸­ï¼‰
> > >
> > > ```xml
> > > <resources>
> > >     <attr format="reference" name="cardViewStyle"/>
> > > </resources>
> > > ```
> > >
> > > è¿™é‡Œå¯èƒ½ä½ ä»¬ä¼šçœ‹ä¸æ‡‚ï¼Œæˆ‘ç®€å•è®²ä¸€ä¸‹ï¼šè¿™ä¸ª `format="reference"` ä»£è¡¨è¿™ä¸ªå±æ€§æ¥å—çš„ç±»å‹ï¼Œè€Œ `reference` è¡¨ç¤ºæ¥å—çš„ç±»å‹ä¸ºä¸€ä¸ªå¼•ç”¨å€¼ï¼Œæ¯”å¦‚ï¼š`@style/xxx`ã€`@color/xxx`ã€`@drawable/xxx` å°±æ˜¯å¼•ç”¨å€¼
> > >
> > > ç„¶å `name="cardViewStyle"` ä»£è¡¨è¿™ä¸ªå±æ€§çš„å”¯ä¸€åå­—
> > >
> > > è¿™ä¸ª attr çš„å¼•ç”¨å°±æ˜¯ CardView å¯ä»¥åœ¨ theme ä¸­è®¾ç½®é»˜è®¤å±æ€§çš„åŸå› ï¼Œå› ä¸ºç³»ç»Ÿè°ƒç”¨ CardView ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œç„¶åå®ƒè¿™ä¸ªæ„é€ å‡½æ•°ä¸»åŠ¨è°ƒç”¨äº†ä¸‰ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”ä¼ å…¥äº† `R.attr.cardViewStyle`ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¯¹åº”çš„æ˜¯ä¸€ä¸ª`style` æ ¼å¼çš„å¼•ç”¨ï¼Œä½†éœ€è¦ä½ è‡ªå·±åœ¨ View ä¸­æŒ‡å®šåå­—
> >
> > å¼•ç”¨ `theme.xml` æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š
> >
> > > - å…¨å±€å¼•ç”¨ï¼Œæ‰€æœ‰ View éƒ½ä¼šä½¿ç”¨è¯¥é…ç½®
> > >
> > >   ```xml
> > >   <application
> > >       android:theme="@style/MyAppTheme">
> > >   </application>
> > >   ```
> > >
> > > - æŸä¸ª Activity å¼•ç”¨ï¼Œå½“å‰ ACtivity å†…ä½¿ç”¨è¯¥é…ç½®
> > >
> > >   ```xml
> > >   <activity
> > >       android:name=".section3.test.TestActivity"
> > >       android:theme="@style/MyAppTheme"
> > >       android:exported="false" />
> > >   ```
> > >
> > > - æŸä¸ª Activity ä½¿ç”¨ä»£ç å¼•ç”¨
> > >
> > >    ```kotlin
> > >    override fun onCreate(savedInstanceState: Bundle?) {
> > >        super.onCreate(savedInstanceState)
> > >        setTheme(R.style.MyAppTheme)
> > >        setContentView(R.layout.layout_card0)
> > >    }
> > >    // æ³¨æ„åœ¨ Activity ä¸­ä½¿ç”¨å¿…é¡»åœ¨ setContentView ä¹‹å‰
> > >    ```
> > >
> > > - å•ä¸ª View ä½¿ç”¨
> > >
> > >   ```xml
> > >   <androidx.cardview.widget.CardView
> > >       android:layout_width="200dp"
> > >       android:layout_height="200dp"
> > >       android:theme="@style/MyAppTheme" />
> > >   ```
> >
> > çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½æœ‰ç‚¹æ™•ï¼Œæˆ‘ä»¬ç®€å•æ¢³ç†ä¸€ä¸‹æµç¨‹ï¼š
> >
> > ```flow
> > read=>operation: ç³»ç»Ÿè¯»å–ä½ å†™çš„ xml
> > new=>operation: ç”Ÿæˆ AttributeSetï¼Œç„¶åè°ƒç”¨ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°
> > first=>operation: ä¸¤ä¸ªå‚æ•°çš„è°ƒç”¨ä¸‰ä¸ªå‚æ•°çš„ï¼Œå¹¶ä¼ å…¥ R.attr.cardViewStyle
> > second=>operation: View å¼€å§‹ä» theme ä¸­è¯»å–å±æ€§
> > third=>operation: View åœ¨ theme ä¸­å‘ç° <item name="cardViewStyle">@style/myCardView_style</item> çš„å®šä¹‰
> > fourth=>operation: è¯»å– @style/MyCardView é‡Œé¢çš„å±æ€§
> > read->new->first->second->third->fourth
> > ```
> >
> > 
>
> ### 4ã€è°ƒç”¨æ„é€ å‡½æ•°çš„ defStyleRes
>
> > ç”±äº CardView æ²¡æœ‰é‡å†™ç¬¬å››ä¸ªæ„é€ å‡½æ•°ï¼ˆå¯èƒ½æ˜¯ä¸ºäº†å…¼å®¹ Android 5.0 ä»¥ä¸‹ï¼Ÿï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ç”¨ FrameLayout æ¥æ¼”ç¤º
> >
> > å…ˆåœ¨ `style.xml` ä¸­å®šä¹‰å±æ€§ï¼š
> >
> > ```xml
> > <style name="myFrameLayout">
> >     <item name="android:layout_width">match_parent</item>
> >     <item name="android:layout_height">match_parent</item>
> >     <item name="android:background">@android:color/black</item>
> > </style>
> > ```
> >
> > ç„¶ååœ¨ä»£ç ä¸­è¿™æ ·ä½¿ç”¨ï¼š
> >
> > ```kotlin
> > val frameLayout = FrameLayout(this, null, 0, R.style.myFrameLayout_style)
> > ```
> >
> > å½“ä½ ä¸èƒ½åœ¨ xml ä¸­ç”³æ˜ï¼Œåªèƒ½åœ¨ä»£ç ä¸­åŠ¨æ€ç”Ÿæˆæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§å†™æ³•ï¼Œæœ‰ä¸ªä¼˜ç‚¹å°±æ˜¯ä½¿ç”¨ `style.xml` å¯ä»¥è¿›è¡Œå±æ€§çš„å¤ç”¨ï¼Œä½†ä¸€èˆ¬éƒ½ç”¨ä¸åˆ°å¤ç”¨ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ LayoutParams å’Œè°ƒç”¨å¯¹åº”æ–¹æ³•æ¥ä»£æ›¿ï¼š
> >
> > ```kotlin
> > val frameLayout = FrameLayout(this)
> > // Android ç¬¬ä¸€èŠ‚è¯¾æˆ‘ä»¬è®²è¿‡ï¼Œçˆ¶å¸ƒå±€å¯ä»¥ç»™å­å¸ƒå±€è®¾ç½®å±æ€§
> > // ä¸”å±æ€§éƒ½ä»¥ layout_ å¼€å¤´ï¼Œæ‰€ä»¥ layout_width å’Œ layout_height 
> > // å¯¹åº”ç”± LayoutParams æ¥è®¾ç½®
> > frameLayout.layoutParams = ViewGroup.LayoutParams(
> >     ViewGroup.LayoutParams.MATCH_PARENT,
> >     ViewGroup.LayoutParams.MATCH_PARENT
> > )
> > // background å±äº View è‡ªèº«å±æ€§ï¼Œæ‰€ä»¥å¯¹åº” View è‡ªèº«æ–¹æ³•
> > frameLayout.setBackgroundColor(Color.BLACK)
> > 
> > // ä½†è¿™æ ·å†™æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼šLayoutParams è¿™ä¸œè¥¿åªèƒ½è®¾ç½®å°‘é‡çš„å±æ€§ï¼Œ
> > // è€Œä¸” LayoutParams æœ‰å¾ˆå¤šä¸ªï¼Œå…·ä½“é€‰æ‹©é‚£ä¸ªéœ€è¦çœ‹ä½ çš„ View è¢«æ·»åŠ åˆ°
> > // å“ªç§çˆ¶å¸ƒå±€é‡Œï¼Œå¦‚æœæ˜¯ LinearLayoutï¼Œå°±æ˜¯ LinearLayout.LayoutParams(...)
> > ```
> >
> > å¯èƒ½æœ‰äººä¸çŸ¥é“ LayoutParams æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œä½ æš‚æ—¶å¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯ç”¨æ¥ä¿å­˜ View ä¸­æœ‰å…³**çˆ¶å¸ƒå±€å±æ€§**çš„ä¸€ä¸ªæ•°æ®ç±»ï¼Œä¾›çˆ¶å¸ƒå±€ä½¿ç”¨ï¼Œåé¢ä¼šå†æ¬¡è®²è§£
> >
> > é™¤äº†ä¸Šé¢è¿™ç§åŠ¨æ€ç”Ÿæˆæ—¶ä¼ å…¥é»˜è®¤å±æ€§ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ„é€ å™¨ä¸­è®¾ç½®ä½ çš„è‡ªå®šä¹‰ View çš„é»˜è®¤å±æ€§ï¼š
> >
> > ä¸€èˆ¬æ˜¯è¿™æ ·å®šä¹‰æ„é€ å™¨çš„ï¼š
> >
> > ```java
> > // ç”±äº java æ˜¯åŸºç¡€ï¼Œæˆ‘å…ˆç”¨ java æ¥å®šä¹‰æ„é€ å™¨ï¼Œåé¢å†ä½¿ç”¨ kt æ¥ä¼˜åŒ–å†™æ³•
> > public class Section3View extends View {
> >     public Section3View(Context context) {
> >         // æ³¨æ„è¿™é‡Œè°ƒç”¨çš„æ˜¯ thisï¼Œè€Œä¸æ˜¯ super
> >         this(context, null);
> >     }
> > 
> >     public Section3View(
> >         Context context, 
> >         @Nullable AttributeSet attrs
> >     ) {
> >         // æ³¨æ„è¿™é‡Œè°ƒç”¨çš„æ˜¯ thisï¼Œè€Œä¸æ˜¯ super
> >         this(context, attrs, R.attr.mySection3View_attrs);
> >     }
> > 
> >     public Section3View(
> >         Context context, 
> >         @Nullable AttributeSet attrs, 
> >         int defStyleAttr
> >     ) {
> >         // æ³¨æ„è¿™é‡Œè°ƒç”¨çš„æ˜¯ thisï¼Œè€Œä¸æ˜¯ super
> >         // è¿™é‡Œå°±æ˜¯è®¾ç½®é»˜è®¤å±æ€§
> >         this(
> >             context, 
> >             attrs, 
> >             defStyleAttr, 
> >             R.style.mySection3View_defaultAttrs
> >         );
> >     }
> > 
> >     public Section3View(
> >         Context context, 
> >         @Nullable AttributeSet attrs, 
> >         int defStyleAttr, 
> >         int defStyleRes
> >     ) {
> >         // ç›´åˆ°è¿™é‡Œæ‰è°ƒç”¨ super
> >         super(context, attrs, defStyleAttr, defStyleRes);
> >     }
> > }
> > ```
> >
> > å…¶ä¸­ `R.attr.mySection3View_attrs`ï¼š
> >
> > ```xml
> > <!--value/attrs.xml-->
> > <resources>
> >     <attr name="mySection3View_attrs" format="reference"/>
> > </resources>
> > ```
> >
> > å…¶ä¸­ `R.style.mySection3View_defaultAttrs`ï¼š
> >
> > ```xml
> > <!--value/style.xml-->
> > <style name="mySection3View_defaultAttrs">
> >     <item name="android:background">@android:color/black</item>
> > </style>
> > ```
> >
> > å¦‚æœä½ å»å¯¹ç…§å®˜æ–¹æ§ä»¶çš„å†™æ³•ï¼Œä½ ä¼šå‘ç°ä»–ä»¬çš„æ„é€ å‡½æ•°ä¹Ÿæ˜¯è¿™æ ·å†™çš„ï¼Œå‰ä¸‰ä¸ªéƒ½æ˜¯è°ƒç”¨ `this()`ï¼Œåªæœ‰æœ€åä¸€ä¸ªè°ƒç”¨   `super()`ï¼Œä½†ä»–ä»¬ä¸€èˆ¬åªè®¾ç½®äº† `R.attr.mySection3View_attrs`ï¼Œç”¨äºå¼€å‘è€…åœ¨ theme ä¸­å®šä¹‰å…¨å±€å±æ€§ï¼ˆ[ç¬¬ä¸‰ç‚¹](#3ã€åœ¨ theme ä¸­è®¾ç½®æŸç§æ§ä»¶çš„é»˜è®¤å±æ€§)ï¼‰ï¼Œè€Œ `R.style.mySection3View_defaultAttrs` åœ¨å®˜ç½‘æ§ä»¶ä¸­ä¸€èˆ¬æ²¡è®¾ç½®ï¼Œéƒ½æ˜¯å†™ä¸ª 0ï¼Œä»£è¡¨æ²¡å¾—é»˜è®¤å±æ€§
> >
> > >ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªé»˜è®¤å±æ€§ï¼Ÿ
> > >
> > >```java
> > >public View(
> > >    Context context, 
> > >    @Nullable AttributeSet attrs, 
> > >    int defStyleAttr, 
> > >    int defStyleRes
> > >)
> > >```
> > >
> > >ä½ ä¼šå‘ç°ç¬¬ä¸‰ä¸ªå‚æ•° `defStyleAttr` å’Œç¬¬å››ä¸ª `defStyleRes` éƒ½æ˜¯è®¾ç½®é»˜è®¤å‚æ•°ï¼Œä½†ä¸ºä»€ä¹ˆè¦åŒæ—¶å­˜åœ¨ä¸¤ä¸ªå‘¢ï¼Ÿ
> > >
> > >åŸå› ï¼š`defStyleAttr` æ˜¯ä» theme ä¸­è¯»å–é»˜è®¤å€¼ï¼Œä½†å¦‚æœæˆ‘ä»¬åªèƒ½åŠ¨æ€ç”Ÿæˆ Viewï¼Œåˆéœ€è¦å¤šæ¬¡ç”¨åˆ°ä¸€äº›å±æ€§ï¼Œåœ¨ Android 5.0 ä¹‹å‰è¦ä¹ˆæ¯æ¬¡éƒ½æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æ¥è®¾ç½®ï¼Œè¦ä¹ˆå†™åœ¨ theme ä¸­ï¼Œä½†è¿™æ ·æœªå…éº»çƒ¦äº†äº›ï¼Œåœ¨ Android 5.0 åå¢åŠ äº†è¿™ä¸ª `defStyleRes` å‚æ•°ï¼Œå°±å¯ä»¥ç›´æ¥æŠŠå±æ€§å†™åœ¨ `style.xml` ä¸­ï¼Œæ–¹ä¾¿å¤ç”¨
> > >
> > >**ä½†è¿™é‡Œæœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼š**ä½¿ç”¨ `defStyleRes` æ—¶ä¸èƒ½è®¾ç½® `defStyleAttr`ï¼Œç»™ `defStyleAttr` å¡«å…¥ 0 æˆ–è€… theme ä¸­ä¸è®¾ç½®å¯¹åº”çš„å±æ€§å³å¯
> >
> > å›åˆ°è¿™é‡Œï¼Œå‰é¢ java çš„å†™æ³•ç¡®å®æ„Ÿè§‰æœ‰äº›è‡ƒè‚¿äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ kt çš„å†™æ³•ï¼š
> >
> > ```kotlin
> > // å¿…é¡»æ·»åŠ  @JvmOverloadsï¼Œä¸ç„¶ java å±‚æ— æ³•ä½¿ç”¨è¯¥æ„é€ å™¨
> > // ä¼šå¯¼è‡´ xml ä¸­çš„ View æ— æ³•ç”Ÿæˆ
> > class Section3ViewKt @JvmOverloads constructor(
> >     context: Context,
> >     attrs: AttributeSet? = null,
> >     defStyleAttr: Int = R.attr.mySection3View_attrs,
> >     defStyleRes: Int = R.style.mySection3View_defaultAttrs
> > ) : View(context, attrs, defStyleAttr, defStyleRes) {
> > }
> > // å¦‚æœä½ æ²¡å¾— R.attr.mySection3View æˆ– R.style.MySection3View_defaultAttrs
> > // å¯ä»¥ç›´æ¥èµ‹å€¼ä¸º 0ï¼Œå°±æ˜¯æ²¡å¾—é»˜è®¤å±æ€§è®¾ç½®
> > ```
>
> **è®²åˆ°è¿™é‡Œï¼Œæ„é€ å‡½æ•°ä¸­çš„å››ä¸ªå‚æ•°å„ä½åº”è¯¥çŸ¥é“æœ‰ä»€ä¹ˆä½œç”¨äº†ï¼Œè¿™é‡Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š**
>
> ```java
> public View(Context context)
> // ç”¨äºåœ¨ä»£ç ä¸­åŠ¨æ€ç”Ÿæˆè‡ªå®šä¹‰ View
> ```
>
> ```java
> public View(
>     Context context, 
>     @Nullable AttributeSet attrs
> )
> // ç”¨äºå†™åœ¨ xml é‡Œé¢ç³»ç»Ÿè°ƒç”¨
> ```
>
> ```java
> public View(
>     Context context,
>     @Nullable AttributeSet attrs, 
>     int defStyleAttr
> )
> // ç”¨äºè®¾ç½®å…¨å±€é»˜è®¤å±æ€§å€¼ï¼Œé€šå¸¸æ˜¯é€šè¿‡ä¸Šé¢ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ¥é—´æ¥è°ƒç”¨
> ```
>
> ```java
> public View(
>     Context context, 
>     @Nullable AttributeSet attrs, 
>     int defStyleAttr, 
>     int defStyleRes
> )
> // ä¹Ÿæ˜¯ç”¨äºè®¾ç½®é»˜è®¤å±æ€§å€¼ï¼Œåªæ˜¯ä¸ç”¨å†™åœ¨ theme ä¸­ï¼Œé€šå¸¸ç”¨äºåŠ¨æ€ç”Ÿæˆä»£ç ä¸­æˆ–è‡ªå·±è‡ªå®šä¹‰ View çš„æ—¶å€™
> ```
>
> å‰é¢è®²äº† 4 ç§æ–¹å¼æ¥è®¾ç½®å±æ€§ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼ä¹Ÿå¯ä»¥æ¥è®¾ç½®å±æ€§
>
> ### 5ã€ç›´æ¥åœ¨ theme ä¸­å®šä¹‰å±æ€§
>
> è¿™ä¸ªä¸ç¬¬ä¸‰ç‚¹ï¼š[åœ¨ theme ä¸­è®¾ç½®æŸç§æ§ä»¶çš„é»˜è®¤å±æ€§](#3ã€åœ¨ theme ä¸­è®¾ç½®æŸç§æ§ä»¶çš„é»˜è®¤å±æ€§) æœ‰äº›ç±»ä¼¼ï¼Œä½†å®ƒå€¼å…è®¸ç›´æ¥å†™åœ¨ theme ä¸­
>
> ```xml
> <resources xmlns:tools="http://schemas.android.com/tools">
>     <style name="Theme.CustomViewWithAnimStudy" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
>         <!--å¦‚æœä½ åŠ äº†è¿™è¡Œä»£ç ï¼Œä½ ä¼šå‘ç°åº”ç”¨å¤§éƒ¨åˆ†æ§ä»¶å˜æˆé»‘è‰²äº†-->
>         <item name="android:background">@android:color/black</item>
>     </style>
> </resources>
> ```
>
> **ä½†æ˜¯ï¼Œ**è¿™ä¸ªæ˜¯ä¸åˆ†æ§ä»¶çš„ç»™å…¨éƒ¨ View è®¾ç½®å±æ€§ï¼Œä¸€èˆ¬ä¸ä¼šä½¿ç”¨åˆ°å®ƒï¼Œåªæœ‰è®¾ç½®æ•´ä¸ªåº”ç”¨çš„ä¸»é¢˜æ—¶ä¼šç”¨åˆ°
>
> æ¯”å¦‚ä½ å¯ä»¥è¯•è¯•æŠŠè¿™å‡ ä¸ªå±æ€§æ”¹ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°åº”ç”¨çš„æ ‡é¢˜æ é¢œè‰²ä»ç´«è‰²æ”¹æˆäº†ä½ è®¾ç½®çš„é¢œè‰²
>
> ```xml
> <item name="colorPrimary">@color/purple_500</item>
> <item name="colorPrimaryVariant">@color/purple_700</item>
> <item name="colorOnPrimary">@color/white</item>
> <item name="colorSecondary">@color/teal_200</item>
> <item name="colorSecondaryVariant">@color/teal_700</item>
> <item name="colorOnSecondary">@color/black</item>
> ```
>
> è¿™äº›å±æ€§å¯¹åº”äº†æŸç§å…·ä½“ä½ç½®çš„é¢œè‰²ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡åšå®¢ï¼šhttps://blog.csdn.net/smartzzg/article/details/104788412
>
> ### äº”ç§å±æ€§å®šä¹‰æ–¹æ³•çš„é¡ºåº
>
> > æˆ‘ä»¬è®²äº†æœ‰ 5 ç§ä¸åŒçš„å±æ€§å®šä¹‰ï¼Œå¦‚æœå®šä¹‰äº†ç›¸åŒå±æ€§ï¼Œä»–ä»¬å­˜åœ¨ä¸€ä¸ªä¼˜å…ˆçº§é¡ºåºï¼š
> >
> > [1ã€ç›´æ¥å†™åœ¨ XML ä¸­](#1ã€ç›´æ¥å†™åœ¨ XML ä¸­)
> >
> > [2ã€ä½¿ç”¨ @style è®¾ç½®å±æ€§](#2ã€ä½¿ç”¨ @style è®¾ç½®å±æ€§)
> >
> > [3ã€åœ¨ theme ä¸­è®¾ç½®æŸç§æ§ä»¶çš„é»˜è®¤å±æ€§](#3ã€åœ¨ theme ä¸­è®¾ç½®æŸç§æ§ä»¶çš„é»˜è®¤å±æ€§)
> >
> > [4ã€è°ƒç”¨æ„é€ å‡½æ•°çš„ defStyleRes](#4ã€è°ƒç”¨æ„é€ å‡½æ•°çš„ defStyleRes)
> >
> > [5ã€ç›´æ¥åœ¨ theme ä¸­å®šä¹‰å±æ€§](#5ã€ç›´æ¥åœ¨ theme ä¸­å®šä¹‰å±æ€§)
> >
> > è¿™é‡Œæ³¨æ„ï¼šä½¿ç”¨ `defStyleRes ` æ—¶ä¸èƒ½è®¾ç½® `defStyleAttr`ï¼Œç»™ `defStyleAttr` å¡«å…¥ 0 æˆ–è€… theme ä¸­ä¸è®¾ç½®å¯¹åº”çš„å±æ€§å³å¯
>
> **åˆ°è¿™é‡Œ View çš„å››ä¸ªæ„é€ å‡½æ•°åŸºæœ¬åˆ†æå®Œæ¯•äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹è®²è§£é‡Œé¢çš„æ–¹æ³•**

### 4ã€onDraw()

> è¯¥æ–¹æ³•æ˜¯ç”¨äºç»˜å›¾æ—¶çš„ä¸€ä¸ªå›è°ƒ
>
> ```kotlin
> override fun onDraw(canvas: Canvas?) {
> super.onDraw(canvas)
> }
> ```
>
> > è¿™é‡Œè®²ä¸€ä¸ªå°æŠ€å·§ï¼šå¯ä»¥æŠŠ `Canvas?` ä¸­çš„ `?` ä¸ºå»æ‰
> >
> > å› ä¸ºåœ¨ kt é‡å†™ `onDraw()` æ–¹æ³•æ—¶ï¼Œæºä»£ç  java å±‚ä¸­å¹¶æ²¡æœ‰ç»™å‚æ•° `canvas` åŠ ä¸Š `@NonNull`ï¼Œå¯¼è‡´ kt ä¸çŸ¥é“å®ƒä¼šä¸ä¼šä¸ºç©ºï¼Œä½†æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…è‚¯å®šæ˜¯çŸ¥é“å®ƒä¸ä¼šä¸ºç©ºçš„ï¼Œæ‰€ä»¥å»æ‰ `?`ï¼Œå¯ä»¥å‡å°‘åç»­çš„åˆ¤æ–­ï¼Œä¸ç„¶å¾ˆå¯èƒ½å†™å‡ºè¿™æ ·çš„ä»£ç 
> >
> > ```kotlin
> > override fun onDraw(canvas: Canvas?) {
> >     super.onDraw(canvas)
> >     canvas?.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> >     canvas?.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> >     canvas?.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> >     canvas?.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> >     canvas?.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> >     canvas?.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> > }
> > ```
> >
> > çœ‹ç€å¥½åƒæ²¡å¾—ä»€ä¹ˆé—®é¢˜ï¼Œä¸å°±å¤šæ‰“äº†ä¸€ä¸ª `?` å—ï¼Ÿ
> >
> > ç¡®å®çœ‹ç€æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä½ æŠŠ kt è½¬æˆ javaï¼Œä½ å°±ä¼šå‘ç°ï¼š
> >
> > ```java
> > protected void onDraw(@Nullable Canvas canvas) {
> >    super.onDraw(canvas);
> >    if (canvas != null) {
> >       canvas.drawRect(0.0F, 0.0F, 100.0F, 200.0F, this.mBlackPaint);
> >    }
> >    if (canvas != null) {
> >       canvas.drawRect(0.0F, 0.0F, 100.0F, 200.0F, this.mBlackPaint);
> >    }
> >    if (canvas != null) {
> >       canvas.drawRect(0.0F, 0.0F, 100.0F, 200.0F, this.mBlackPaint);
> >    }
> >    if (canvas != null) {
> >       canvas.drawRect(0.0F, 0.0F, 100.0F, 200.0F, this.mBlackPaint);
> >    }
> >    if (canvas != null) {
> >       canvas.drawRect(0.0F, 0.0F, 100.0F, 200.0F, this.mBlackPaint);
> >    }
> >    if (canvas != null) {
> >       canvas.drawRect(0.0F, 0.0F, 100.0F, 200.0F, this.mBlackPaint);
> >    }
> > }
> > ```
> >
> > æ¯ä¸ª canvas éƒ½å•ç‹¬åˆ¤æ–­äº†ä¸€éæ˜¯å¦ä¸ºç©ºï¼Œä¸çŸ¥é“ä½ ä»¬æ€ä¹ˆæƒ³ï¼Œä½†æˆ‘çš„å¼ºè¿«ç—‡ä¸å…è®¸å‡ºç°è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥å»ºè®®å„ä½å†™è‡ªå®šä¹‰ View æ—¶ï¼ŒæŠŠæ–¹æ³•å‚æ•°ä¸­å¯ä»¥å»æ‰ `?` çš„é¡ºæ‰‹ç»™å»æ‰
> >
> > é™¤äº† `onDraw()` ä»¥å¤–ï¼Œè¿˜æœ‰ `override fun onTouchEvent(event: MotionEvent?)` çš„ `?` ä¹Ÿå¯ä»¥å»æ‰
> >
> > > æ€ä¹ˆçœ‹ kt è½¬æˆçš„ java ä»£ç ï¼Ÿ
> > >
> > >  <img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320161207313.png" alt="image-20220320161207313" style="zoom:50%;" />
> > >
> > >  <img src="C:/Users/%E9%83%AD%E7%A5%A5%E7%91%9E/AppData/Roaming/Typora/typora-user-images/image-20220320144121673.png" alt="image-20220320144121673" style="zoom:50%;" />
> >
> > æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹è®²è§£ `onDraw()` éœ€è¦çš„å…¶ä»–çŸ¥è¯†
>
> ### 1ã€Canvas ç”»å¸ƒ
>
> >ç”±äºæ—¶é—´åŸå› ï¼Œè¿™é‡Œä¸ä¼šè®²å¾—å¾ˆè¯¦ç»†ï¼Œä½ ä»¬å¯ä»¥åœ¨è¿™äº›åœ°æ–¹è¿›è¡Œå­¦ä¹ ï¼š
> >
> >- https://carsonho.blog.csdn.net/article/details/60598775
> >- https://qijian.blog.csdn.net/article/details/50995268
> >
> >
> >| å‚æ•°   | ç±»å‹   | ä½œç”¨                                                         |
> >| ------ | ------ | ------------------------------------------------------------ |
> >| canvas | Canvas | å­—é¢ç¿»è¯‘æ˜¯â€œå¸†å¸ƒâ€ï¼Œä½ å¯ä»¥çœ‹æˆæ˜¯åº•å±‚ç»™äº†ä½ ä¸€å¼ â€œç”»å¸ƒâ€ï¼ˆcanvasï¼‰ï¼Œç„¶åä½ åœ¨è¿™å¼ ç”»å¸ƒä¸Šè¿›è¡Œç»˜å›¾ |
> >
> >é‚£æ€ä¹ˆè¿›è¡Œç”»å›¾å‘¢ï¼Ÿ
> >
> >```kotlin
> >// è¿™ä¸ª paint ä½ å¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯â€œç”»ç¬”â€ï¼Œåé¢ä¼šå•ç‹¬è®²è§£
> >private val mBlackPaint = Paint().apply {
> >color = Color.BLACK // è®¾ç½®ç”»ç¬”é¢œè‰²ä¸ºé»‘è‰²
> >}
> >override fun onDraw(canvas: Canvas) {
> >super.onDraw(canvas)
> >// ç”»ä¸€ä¸ª (0, 0) - (100, 200) çš„é»‘è‰²çŸ©å½¢
> >canvas.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> >}
> >```
> >
> >å¦‚ä¸Šé¢ä»£ç ï¼Œè°ƒç”¨ `canvas.drawRect()` å°±å¯ä»¥ç”»ä¸€ä¸ªé»‘è‰²çŸ©å½¢åœ¨ View é‡Œé¢
> >
> >æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æ•ˆæœï¼š
> >
> ><img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320144833039.png" alt="image-20220320144833039" style="zoom:50%;float:left" />
> >
> >å¦‚æœä½ æ²¡æœ‰è‡ªå®šä¹‰ View åŸºç¡€çš„è¯ï¼Œå¯èƒ½ä¼šè§‰å¾—æœ‰äº›å¥‡æ€ª
> >
> >æˆ‘ä»¬ä»å°å­¦å¼€å§‹å­¦çš„åæ ‡ç³»ç¬¬ä¸€è±¡é™ä¸æ˜¯å‘ä¸Šä¸º Y æ­£åŠè½´ï¼Œå‘å³ä¸º X æ­£åŠè½´ï¼Œé‚£ä¹ˆæŒ‰ç…§æƒ¯æ€§æ€ç»´ï¼Œ(0, 0) - (100, 200) ä¸ºä»€ä¹ˆä¸æ˜¯ä¸‹å›¾è¿™æ ·çš„ï¼Ÿ
> >
> ><img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320144833039.png" alt="image-20220320144833039" style="zoom:50%;transform:rotateX(180deg);float:left" />
> >
> >å…¶å®åŸå› åœ¨äº View ä¸­åæ ‡ç³»çš„ y è½´æ˜¯åè¿‡æ¥çš„ï¼Œæˆ‘çŒœæµ‹æ˜¯å› ä¸ºï¼šä¸ºäº†è®¾é…æ‰‹æœºçš„ç‰¹ç‚¹ï¼Œæ¯”å¦‚æˆ‘ä»¬çœ‹ä¸€äº›åˆ—è¡¨ï¼Œéƒ½æ˜¯æ‰‹æŒ‡å¾€ä¸Šæ»‘åŠ¨ï¼ŒæŸ¥çœ‹ä¸‹é¢çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸ºäº†å¥½å¼€å‘ï¼ŒView ä¸­çš„åæ ‡åŸç‚¹å°±è®¾ç½®åœ¨äº†å·¦ä¸Šè§’ï¼Œå‘ä¸‹ä¸º Y æ­£åŠè½´ï¼Œå‘å³ä¸º X æ­£åŠè½´
> >
> >è¿™ä¸ªç®—æ˜¯åŸºç¡€å†…å®¹äº†ï¼Œå¦‚æœä¸çŸ¥é“çš„è¯ï¼Œå¯ä»¥å»çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼šhttps://blog.csdn.net/carson_ho/article/details/56009827
> >
> >Canvas é‡Œé¢ä¸æ­¢æœ‰ç»˜åˆ¶çŸ©å½¢çš„æ–¹æ³•ï¼Œè¿˜æœ‰ç»˜åˆ¶åœ†çš„æ–¹æ³•ï¼Œç»˜åˆ¶æ–‡å­—çš„æ–¹æ³•Â·Â·Â·Â·Â·Â·ï¼Œè¿™é‡Œä¸ä¼šå»è®²è§£è¿™äº›åŸºç¡€å†…å®¹ï¼Œå¯ä»¥å»ä¸‹é¢è¿™äº›åœ°æ–¹å»æŸ¥çœ‹ï¼š
> >
> >- https://developer.android.google.cn/reference/kotlin/androidx/compose/ui/graphics/Canvas?hl=en
>
> ### 2ã€Paint ç”»ç¬”
>
> > å‰é¢çš„ä»£ç æ¼”ç¤ºä¸­å‡ºç°äº† `Paint`ï¼Œè¿™ä¸ªç±»ä¸»è¦æ˜¯ç®¡ç”»ç¬”çš„ï¼Œé™¤äº†è®¾ç½®é¢œè‰²ä»¥å¤–ï¼Œä»–è¿˜å¯ä»¥è®¾ç½®çº¿çš„ç²—ç»†ç­‰ï¼Œè¿™é‡Œç»™å‡ºæ–‡ç« ï¼Œä½ ä»¬æœ‰æ—¶é—´è‡ªå·±å»çœ‹çœ‹å§ï¼Œé‚£æœ¬è‡ªå®šä¹‰é»‘ä¹¦å¯¹äº Paint çš„å†…å®¹æœ‰ç‚¹å°‘ï¼Œå»ºè®®å»çœ‹ä¹¦ä½œè€…å†™çš„æ–‡ç« ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå…¶ä»–ç”¨æ³•
> >
> > - https://qijian.blog.csdn.net/article/details/50995268
>
> ### 3ã€Path è·¯å¾„
>
> > Path è·¯å¾„æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ç»˜åˆ¶æ›²çº¿ï¼Œç»˜åˆ¶ä¸è§„åˆ™çš„å›¾å½¢ç­‰ï¼Œè¿™é‡Œä½ è¿›è¡Œè®²è§£ï¼Œç»™å‡ºä¸‹é¢æ–‡ç« ï¼š
> >
> > - https://carsonho.blog.csdn.net/article/details/60597923
> > - https://qijian.blog.csdn.net/article/details/50995268
>
> ### å…¶ä»–ä¸œè¥¿
>
> > ä¸Šé¢å¹¶æ²¡æœ‰åˆ—å®ŒåŸºç¡€çŸ¥è¯†ï¼Œå› ä¸ºåŸºç¡€çŸ¥è¯†å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œè¿™é‡Œæ˜¯å†™ä¸ä¸‹çš„ï¼Œæ¥ä¸‹æ¥æˆ‘è®²ä¸€äº›å…¶ä»–ç»éªŒæ€§çš„ä¸œè¥¿
> >
> > ### 1ã€onDraw() é‡Œé¢ç¦æ­¢ new å¯¹è±¡
> >
> > > å¾ˆå¤šåˆå­¦è€…åœ¨åˆšå¼€å§‹å†™çš„æ—¶å€™å¾ˆå–œæ¬¢åœ¨ `onDraw()` é‡Œé¢ new å¯¹è±¡ï¼Œä¹‹å‰ `canvas.drawRect()` ä¸æ˜¯è¦ä¼ å…¥ä¸€ä¸ªç”»ç¬”å—ï¼Ÿå°±ä¼šæœ‰äººè¿™æ ·å†™
> > >
> > > ```kotlin
> > > override fun onDraw(canvas: Canvas) {
> > >     super.onDraw(canvas)
> > >     val blackPaint = Paint()
> > >     blackPaint.color = Color.BLACK
> > >     canvas.drawRect(0F, 0F, 100F, 200F, blackPaint)
> > > }
> > > ```
> > >
> > > è¿™æ ·å†™æ—¶ AS è¿˜ä¼šæŠ¥ä¸€ä¸ªé»„ï¼Œå‘Šè¯‰ä½ è¿™æ ·å†™æ˜¯ä¸å¯¹çš„ï¼Œä½†ä½ çŸ¥é“ä¸ºä»€ä¹ˆä¸å¯¹å—ï¼Ÿ
> > >
> > > åŸå› ï¼š`onDraw()` åœ¨ä¸€ç›´åˆ·æ–°è§†å›¾æ—¶ï¼Œåœ¨ 60 å¸§çš„æ‰‹æœºä¸Šä¼šæ¯éš” 16 æ¯«ç§’å›è°ƒä¸€æ¬¡ï¼Œ90 å¸§çš„æ‰‹æœºä¸Šæ¯éš” 11 æ¯«ç§’å›è°ƒä¸€æ¬¡ï¼ˆ1000 Ã· 90ï¼‰ï¼Œæ‰€ä»¥åœ¨ä¸€ç§’é’Ÿï¼Œ60 å¸§çš„æ‰‹æœºä¼šç”Ÿæˆ 60 ä¸ª Paint å¯¹è±¡ï¼Œ90 å¸§æ‰‹æœºç”Ÿæˆ 90 ä¸ªå¯¹è±¡ï¼Œè¿™æ ·ç–¯ç‹‚ new å¯¹è±¡ï¼Œä¼šè®©æ‰‹æœºå‡ºç°å¡é¡¿ï¼Œè¿™è·Ÿä¸ŠèŠ‚è¯¾è®²çš„ `onBindViewHolder()` ä¸è¦å†™ç‚¹å‡»ç›‘å¬ä¸€æ ·ï¼Œä½†è¿™ä¸ªä¼šæ¯”å®ƒæ›´ä¸¥é‡
> > >
> > > ä½† AS çš„æ™ºèƒ½æç¤ºå¹¶ä¸æ˜¯èƒ½å‘ç°æ‰€æœ‰çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š
> > >
> > > ```kotlin
> > > override fun onDraw(canvas: Canvas) {
> > >     super.onDraw(canvas)
> > >     set { 
> > >         // ...
> > >     }
> > > }
> > > 
> > > private fun set(func: () -> Unit) {
> > >     func.invoke()
> > > }
> > > ```
> > >
> > > è¿™ç§æƒ…å†µè¾ƒéš¾å‘ç°ï¼Œè¿™æ ·å†™æ¯æ¬¡éƒ½ä¼šç”Ÿæˆä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œå»ºè®®åŠ ä¸Š `inline` å…³é”®å­—
> >
> > ### 2ã€ä¸è¦åœ¨ onDraw() é‡Œé¢è¿›è¡Œè€—æ—¶æ“ä½œ
> >
> > > åŸå› è·Ÿä¸Šé¢ä¸€æ ·
> >
> > ### 3ã€ä¸è¦æŒæœ‰ canvas å¯¹è±¡
> >
> > > æ¯æ¬¡å›è°ƒçš„ canvas å¯¹è±¡å¹¶ä¸æ˜¯ä¸€å®šæ˜¯åŒä¸€ä¸ªï¼ˆå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯åŒä¸€ä¸ªï¼‰ï¼Œè€Œä¸”æ¯æ¬¡çš„å›è°ƒåªèƒ½è¡¨ç¤ºå½“å‰å¸§çš„çŠ¶æ€ï¼Œæ¯”å¦‚æˆ‘ä»¬æ¥ä¸ªè¿è§„æ“ä½œï¼š
> > >
> > > ```kotlin
> > > override fun onDraw(canvas: Canvas) {
> > >     super.onDraw(canvas)
> > >     // å¼€ä¸€ä¸ªçº¿ç¨‹æ¨¡æ‹ŸæŒæœ‰ canvas å¯¹è±¡
> > >     thread {
> > >         // å»¶è¿Ÿ 20 æ¯«ç§’æ‰ç»˜å›¾
> > >         sleep(20)
> > >         canvas.drawRect(0F, 0F, 100F, 200F, mBlackPaint)
> > >     }
> > > }
> > > ```
> > >
> > > ä½ å¯èƒ½çŒœéƒ½çŒœä¸åˆ°å®ƒæŠŠå›¾ç»˜åˆ¶åˆ°å“ªé‡Œå»äº†
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > >  
> > >
> > > <img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320163052101.png" alt="image-20220320163052101" style="zoom:50%;float:left" />
> > >
> > > å¥½å®¶ä¼™ï¼Œå®ƒç«Ÿç„¶æŠŠå›¾ç»˜åˆ¶åˆ°æ ‡é¢˜æ ä¸Šäº†ï¼Œè¿™é‡ŒçŒœæµ‹åŸå› å¦‚ä¸‹ï¼ˆæ²¡æœ‰å»æŸ¥çœ‹æºç æ‰¾çœŸæ­£åŸå› ï¼‰ï¼š
> > >
> > > - æ•´ä¸ªåº”ç”¨å…±ç”¨äº†åŒä¸€ä¸ª canvas å¯¹è±¡
> > > - å› å¼€å¯çº¿ç¨‹ sleepï¼Œæ‰€ä»¥ canvas æ˜¯æ•´ä¸ªåº”ç”¨ç»˜åˆ¶å®Œæˆåå†è°ƒç”¨çš„ `canvas.drawRect()`
> > > - æ ‡é¢˜æ æ˜¯åœ¨æœ€åè¿›è¡Œç»˜åˆ¶çš„ï¼Œæ­¤æ—¶çš„ canvas çš„åæ ‡ç³»æ˜¯ä»¥æ ‡é¢˜æ ä¸ºå‡†çš„
> > >
> > > è¿™æ€ä¹ˆéªŒè¯å‘¢ï¼Ÿ
> > >
> > > > ä½ æŠŠå¼€å‘è€…æ¨¡å¼æ¨¡å¼çš„ `æ˜¾ç¤ºå¸ƒå±€è¾¹ç•Œ` ç»™æ‰“å¼€ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™ç§å›¾ï¼š
> > > >
> > > > <img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320164459116.png" alt="image-20220320164459116" style="zoom: 67%;float:left" />
> > > >
> > > > è¿™é‡Œè¯´æ˜æ ‡é¢˜æ çš„æ–‡å­—æ˜¯ä¸€ä¸ª View æ¥æ˜¾ç¤ºçš„
> > > >
> > > > é‚£æˆ‘ä»¬è¯•è¯•æŠŠæ ‡é¢˜æ ç»™å»æ‰ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
> > > >
> > > > ```xml
> > > > <!--theme.xml-->
> > > > <style name="xxx" parent="Theme.MaterialComponents.DayNight.NoActionBar">
> > > > ```
> > > >
> > > > <img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320164844556.png" alt="image-20220320164844556" style="zoom: 67%;float:left" />
> > > >
> > > > å˜¿ï¼Œå»æ‰æ ‡é¢˜æ åç»˜åˆ¶çš„ä½ç½®å¯¹äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘æå‡ºçŒœæµ‹ï¼šæ ‡é¢˜æ æ˜¯åœ¨æœ€åè¿›è¡Œç»˜åˆ¶çš„
> > > >
> > > > å…¶å®æˆ‘ä»¬å¯ä»¥éªŒè¯ä¸€ä¸‹è¿™ä¸ªçŒœæµ‹ï¼Œå†™ä¸€ä¸ªåœ¨å®ƒåé¢ç»˜åˆ¶çš„ View éªŒè¯ä¸‹ï¼š
> > > >
> > > > ```xml
> > > > <com.ndhzs.lib.section4.MySection4ViewCanvas
> > > >     android:layout_width="300dp"
> > > >     android:layout_height="300dp"
> > > >     app:layout_constraintBottom_toBottomOf="parent"
> > > >     app:layout_constraintLeft_toLeftOf="parent"
> > > >     app:layout_constraintRight_toRightOf="parent"
> > > >     app:layout_constraintTop_toTopOf="parent" />
> > > > 
> > > > <View
> > > >     android:layout_width="match_parent"
> > > >     android:layout_height="match_parent"/>
> > > > ```
> > > >
> > > > <img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320165148269.png" alt="image-20220320165148269" style="zoom: 67%;float:left" />
> > > >
> > > > æœç„¶ï¼Œæˆ‘çš„çŒœæµ‹åº”è¯¥æ˜¯åˆç†çš„
> >
> > ### 4ã€è‡ªå®šä¹‰ View å’Œ ViewGroup åœ¨ç»˜åˆ¶ä¸­çš„ä¸åŒ
> >
> > > åœ¨è‡ªå®šä¹‰ ViewGroup ä¸­ï¼Œä¸€èˆ¬ä¸ä¼šé‡å†™ `onDraw()`ï¼Œå› ä¸º ViewGroup å¯¹ `onDraw()` è¿›è¡Œäº†å¤„ç†ï¼Œåªæœ‰åœ¨æœ‰èƒŒæ™¯å›¾æ—¶ï¼Œæ‰ä¼šè°ƒç”¨ `onDraw()`ï¼Œæ‰€ä»¥åœ¨è‡ªå®šä¹‰ ViewGroup æ—¶æƒ³ç»˜å›¾ä¸€èˆ¬æ˜¯é‡å†™ `dispatchDraw(Canvas canvas)`ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥å†³å®šæ˜¯ç»˜åˆ¶åœ¨å­ View ä¸Šå±‚è¿˜æ˜¯å­ View ä¸‹å±‚ï¼Œå…·ä½“çš„ä½ ä»¬è‡ªå·±å»å®è·µä¸€ä¸‹å§ï¼Œè¿™é‡Œç»™å‡ºæ–‡ç« é“¾æ¥ï¼šhttps://www.jianshu.com/p/89efaf8bd3dd
>
> ### onDraw() çš„ç»˜åˆ¶æµç¨‹
>
> > è¿™ä¸œè¥¿å±äºé«˜é˜¶å†…å®¹ï¼Œé™äºæ—¶é—´å…³ç³»ï¼Œè¿™é‡Œæˆ‘å°±ä¸è®²äº†ï¼Œå¯ä»¥çœ‹çœ‹è¿™äº›æ–‡ç« ï¼š
> >
> > - https://blog.csdn.net/carson_ho/article/details/56011153
> > - https://github.com/Idtk/Blog/blob/master/Blog/9%E3%80%81Invalidate.md
>
>   

### 5ã€invalidate()

> è¿™ä¸œè¥¿ä½ ç›®å‰åªéœ€è¦è®°ä½ä»¥ä¸‹å‡ ç‚¹å°±å¯ä»¥äº†ï¼š
>
> - è°ƒç”¨åä¼šåœ¨ä¸‹ä¸€å¸§å›è°ƒ `onDraw()` è¿›è¡Œåˆ·æ–°
> - ä¸‹ä¸€å¸§æ˜¯æŒ‡ä¸‹ä¸€æ¬¡å±å¹•åˆ·æ–°çš„æ—¶å€™
>
> å¦‚æœä½ æƒ³æ¢ç©¶æºç çš„è¯ï¼Œæˆ‘åªèƒ½ä¸¢æ–‡ç« å‡ºæ¥äº†ï¼š
>
> - https://juejin.cn/post/7017452765672636446
>
> OKï¼Œè¿™ä¸ªæ–¹æ³•è®²å®Œäº†ï¼Œå› ä¸ºå¾€æ·±äº†è®²ï¼Œä¼šæ¶‰åŠåˆ° Handler æœºåˆ¶ã€ViewRootImpl ç­‰ Framwork å±‚æºç 
>
> å“¦ï¼Œæƒ³èµ·äº†ï¼Œè¿˜è¦ä¸€ç‚¹ï¼Œé™¤äº† `invalidate()` å¤–è¿˜æœ‰ä¸€ä¸ª `postInvalidate()` ç”¨äºåœ¨å…¶ä»–çº¿ç¨‹é‡Œåˆ·æ–°
>
> END

### 6ã€è‡ªå®šä¹‰å±æ€§ AttributeSet

> å‰é¢æˆ‘ä»¬æåˆ°ç³»ç»Ÿä¼šæŠŠä½  xml ä¸­å†™å¾—å±æ€§è£…æ¢ä¸ºä¸€ä¸ª AttributeSet å¯¹è±¡ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆè‡ªå®šä¹‰è‡ªå·±çš„å±æ€§å‘¢ï¼Ÿ
>
> é¦–å…ˆï¼Œéœ€è¦æ–°å»ºä¸€ä¸ª `res/value/attrs.xml` æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘æƒ³è¦è‡ªå®šä¹‰ä¸€ä¸ªåœ†åŠå¾„çš„å±æ€§
>
> ```xml
> <resources>
>     <!--è¿™ä¸ª name æ˜¯ View çš„ç±»å-->
>     <declare-styleable name="MySection6View">
>         <!--è¿™ä¸ª name æ˜¯è‡ªå®šä¹‰å±æ€§çš„åç§°ï¼Œformate æ˜¯æ¥å—çš„ç±»å‹-->
>         <attr name="my6_circleRadius" format="dimension"/>
>     </declare-styleable>
> </resources>
> ```
>
> å¦‚ä¸Šè¿°ä»£ç ï¼Œè¿™é‡Œæœ‰éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼š
>
> - è‡ªå®šä¹‰å±æ€§çš„åç§°ä¸èƒ½ä¸å®˜æ–¹çš„é‡å¤ï¼Œè€Œä¸”å»ºè®®åŠ ä¸Šå‰ç¼€ï¼Œä¸å®˜æ–¹çš„è¿›è¡ŒåŒºåˆ†ï¼Œæ¯”å¦‚æˆ‘å°±åŠ ä¸Šäº† `my6_`
>
> `formate` æœ‰ä¸‹é¢å‡ ç§ç±»å‹ï¼š
>
> | ç±»å‹            | è¯´æ˜     | ç”¨æ³•                          |                                        |
> | --------------- | -------- | ----------------------------- | -------------------------------------- |
> | ***dimension*** | é•¿åº¦å€¼   | "1dp"ã€"1px"ã€"@dimen/xxx"    | è¿™é‡Œæ— æ‰€è°“ dpã€pxï¼Œç³»ç»Ÿä¼šæœ€ç»ˆè£…æ¢æˆ px |
> | ***reference*** | å¼•ç”¨å€¼   | "@drawable/xxx"ã€"@style/xxx" |                                        |
> | ***color***     | é¢œè‰²å€¼   | "#FFFFFFFF"ã€"@color/xxx"     |                                        |
> | ***float***     | å°æ•°     | "1.0"                         |                                        |
> | ***boolean***   | å¸ƒå°”ç±»å‹ | "true"ã€"@bool/xxx"           |                                        |
> | ***interger***  | æ•´æ•°     | "1"ã€"@interget/xxx"          |                                        |
> | ***string***    | å­—ç¬¦ä¸²   | "string"ã€"@string/xxx"       |                                        |
> | ***fraction***  | ç™¾åˆ†æ•°   | "50%"ã€"@fraction/xxx"        |                                        |
> | ***enum***      | æšä¸¾     | [çœ‹ä¸‹æ–‡](#enum)               |                                        |
> | ***flag***      | ä½è¿ç®—   | [çœ‹ä¸‹æ–‡](#flag)               |                                        |
>
> ### enum
>
> > ```xml
> > <!--æ¯”å¦‚æˆ‘è®¾ç½®åœ†çš„ä½ç½®å±æ€§-->
> > <attr name="my6_circleGravity" format="enum">
> >     <enum name="left" value="0"/>
> >     <enum name="center" value="1"/>
> >     <enum name="right" value="2"/>
> > </attr>
> > ```
> >
> > <img src="https://gitee.com/guo985892345/typora/raw/master/img/image-20220320195658810.png" alt="image-20220320195658810" style="zoom:50%;float:left" />
> >
> > è®¾ç½®ååœ¨ä½¿ç”¨æ—¶å®ƒçš„å±æ€§å°±åªèƒ½é€‰æ‹©ä½ å¡«å†™çš„é‚£å‡ ä¸ª
>
> ### flag
>
> > å°±æ˜¯è¿›è¡Œä½è¿ç®—ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ FrameLayout çš„ `layout_gravity` ä¸ºä¾‹
> >
> > ```xml
> > <attr name="layout_gravity">
> >     <!--0011 0000-->
> >     <flag name="top" value="0x30" />
> >     <!--0101 0000-->
> >     <flag name="bottom" value="0x50" />
> >     <!--0000 0011-->
> >     <flag name="left" value="0x03" />
> >     <!--0000 0101-->
> >     <flag name="right" value="0x05" />
> >     <!--0001 0000-->
> >     <flag name="center_vertical" value="0x10" />
> >     <!--0000 0001-->
> >     <flag name="center_horizontal" value="0x01" />
> >     <!--0001 0001-->
> >     <flag name="center" value="0x11" />
> >     <flag name="start" value="0x00800003" />
> >     <flag name="end" value="0x00800005" />
> > </attr>
> > ```
> >
> > ä½ æ˜¯å¦è¿˜è®°å¾—ä½ æ›¾ç»è¿™æ ·ä½¿ç”¨è¿‡ï¼Ÿ
> >
> > ```xml
> > <FrameLayout
> >     android:layout_width="match_parent"
> >     android:layout_height="match_parent">
> > 
> >     <View
> >         android:layout_width="match_parent"
> >         android:layout_height="match_parent"
> >         android:layout_gravity="top|left"/>
> > 
> > </FrameLayout>
> > ```
> >
> > > è¿™é‡Œä½ ä¼šå‘ç°å®ƒæŠŠ `top|left` æŠ¥é»„äº†ï¼ŒåŸå› åœ¨äºå®ƒæ¨èä½ ä½¿ç”¨ `start` å»ä»£æ›¿ `left`ï¼Œå› ä¸ºåœ¨éƒ¨åˆ†å›½å®¶æ˜¯ä»å³è¾¹å¾€å·¦è¾¹é˜…è¯»æ–‡å­—çš„ï¼Œæ‰€ä»¥ï¼ŒAndroid ä¸ºäº†å›½é™…åŒ–ï¼Œå°±è®¾è®¡å‡ºäº† `start` ä»£æ›¿ `left`ï¼Œ`end` ä»£æ›¿ `right`
>
> ### ç±»å‹çš„æ··ç”¨
>
> > æ¯”å¦‚ `android:layout_width` æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š
> >
> > ```xml
> > <attr name="layout_width" format="dimension">
> >     <enum name="fill_parent" value="-1" />
> >     <enum name="match_parent" value="-1" />
> >     <enum name="wrap_content" value="-2" />
> > </attr>
> > ```
> >
> > 
> >
> > è¿˜æœ‰ `android:background` æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š
> >
> > ```xml
> > <attr name="background" format="reference|color" />
> > ```
> >
> > æ‰€ä»¥ä½ ä¼ å…¥ `@drawable/xxx` å’Œ `#FFFFFFFF`ï¼Œå®ƒéƒ½å¯ä»¥è·å–ï¼Œåªæ˜¯å¡«å…¥é¢œè‰²å€¼æ—¶ä½¿ç”¨ `TypedValue#getDrawable()` å¾—åˆ°æ˜¯ ColorDrawable
> >
> > 
> >
> > ä¹Ÿæ”¯æŒè¿™æ ·æ··ç”¨ï¼š
> >
> > ```xml
> > <!--è¿™æ˜¯ View çš„ä¸€ä¸ªå±æ€§-->
> > <attr name="focusable" format="boolean|enum">
> >     <enum name="auto" value="0x00000010" />
> > </attr>
> > ```
> >
> > ä½†è¿™æ ·ä½¿ç”¨åªèƒ½æ‰‹åŠ¨å»åˆ¤æ–­ï¼š
> >
> > ```java
> > private int getFocusableAttribute(TypedArray attributes) {
> >     TypedValue val = new TypedValue();
> >     if (attributes.getValue(com.android.internal.R.styleable.View_focusable, val)) {
> >         if (val.type == TypedValue.TYPE_INT_BOOLEAN) {
> >             return (val.data == 0 ? NOT_FOCUSABLE : FOCUSABLE);
> >         } else {
> >             return val.data;
> >         }
> >     } else {
> >         return FOCUSABLE_AUTO;
> >     }
> > }
> > ```
>
> å‰é¢è®²äº†ç±»å‹çš„å®šä¹‰ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆè·å–è¿™äº›å±æ€§å‘¢ï¼Ÿ
>
> ```kotlin
> private var mCircleRadius = 100
> // è¿™ä¸ª enum å±æ€§æ›´å»ºè®®ä½¿ç”¨æšä¸¾æ¥ä¿å­˜ï¼Œå®˜æ–¹é€šå¸¸ä½¿ç”¨çš„æ³¨è§£ï¼Œä½† kt å¾ˆæ€ªï¼Œæ³¨è§£ä¸èµ·ä½œç”¨
> private var mCircleGravity = 0
> init {
>     if (attrs != null) {
>         val ty = context.obtainStyledAttributes(attrs, R.styleable.MySection6View)
>         mCircleRadius = ty.getDimensionPixelSize(
>             R.styleable.MySection6View_my6_circleRadius,
>             mCircleRadius
>         )
>         mCircleGravity = ty.getInt(
>             R.styleable.MySection6View_my6_circleGravity,
>             mCircleGravity
>         )
>         ty.recycle()
>     }
> }
> ```
>
> è¿™é‡Œè¿˜å¥½åªæœ‰ä¸¤ä¸ªå±æ€§ï¼Œä½†å¦‚æœæœ‰å¤šè¾¾ä¸Šç™¾ä¸ªå±æ€§è¿™æ ·å†™æœªå…å¤ªå è¡Œæ•°äº†ï¼Œæ‰€ä»¥ï¼Œç§‰æŒç€å°‘äº›ä»£ç ï¼Œæˆ‘ä½¿ç”¨äº† kt æ‰©å±•å‡½æ•°æ¥ä¼˜åŒ–ï¼ˆä¸‹é¢æ˜¯æˆ‘å†™çš„è¯¾è¡¨è‡ªå®šä¹‰ Viewï¼‰ï¼š
>
> ```kotlin
> // å…ˆæŠŠå±æ€§çš„è¯»å–å•ç‹¬æå–åˆ°ä¸€ä¸ªç±»ä¸­
> open class NetLayout @JvmOverloads constructor(
>     context: Context,
>     attrs: AttributeSet? = null,
>     defStyleAttr: Int = R.attr.netLayoutStyle,
>     defStyleRes: Int = 0
> ) : ViewGroup(context, attrs, defStyleAttr, defStyleRes), INetLayout {
>     // å±æ€§å€¼
>     protected val mNetAttrs: NetLayoutAttrs = NetLayoutAttrs.newInstance(this, attrs)
> }
> ```
>
> ````kotlin
> // æˆ‘æŠŠå±æ€§å•ç‹¬å†™åœ¨äº†ä¸€ä¸ªç±»é‡Œé¢
> open class NetLayoutAttrs(
>     rowCount: Int,
>     columnCount: Int
> ) : BaseViewAttrs {
> 
>     var rowCount = rowCount
>         internal set
>     var columnCount = columnCount
>         internal set
> 
>     companion object {
>         fun newInstance(
>             view: View,
>             attrs: AttributeSet?,
>             defStyleAttr: Int = 0,
>             defStyleRes: Int = 0,
>         ): NetLayoutAttrs {
>             return newAttrs(
>                 view,
>                 attrs,
>                 R.styleable.NetLayout,
>                 defStyleAttr,
>                 defStyleRes
>             ) {
>                 // è¿™é‡Œä½ å°±ä¼šçœ‹åˆ°ç›´æ¥ä½¿ç”¨ R.styleable.xxx æ¥è·å–å±æ€§ï¼Œè¿™æ ·å†™èµ·æ¥èˆ’æœå¤šäº†
>                 NetLayoutAttrs(
>                     R.styleable.NetLayout_net_rowCount.int(ROW_COUNT),
>                     R.styleable.NetLayout_net_columnCount.int(COLUMN_COUNT)
>                 )
>             }
>         }
> 
>         const val ROW_COUNT = 4
>         const val COLUMN_COUNT = 4
>     }
> }
> ````
>
> ```kotlin
> // è¿™æ˜¯å®šä¹‰æ‰©å±•å‡½æ•°çš„æ¥å£
> internal interface BaseViewAttrs {
> 
>     fun <T> newAttrs(
>         view: View,
>         attrs: AttributeSet?,
>         @StyleableRes
>         styleableId: IntArray,
>         defStyleAttr: Int = 0,
>         defStyleRes: Int = 0,
>         func: Typedef.() -> T
>     ): T = BaseViewAttrs.newAttrs(view, attrs, styleableId, defStyleAttr, defStyleRes, func)
> 
>     companion object {
>         fun <T> newAttrs(
>             view: View,
>             attrs: AttributeSet?,
>             @StyleableRes
>             styleableId: IntArray,
>             defStyleAttr: Int = 0,
>             defStyleRes: Int = 0,
>             func: Typedef.() -> T
>         ): T {
>             val ty = view.context.obtainStyledAttributes(attrs, styleableId, defStyleAttr, defStyleRes)
>             if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
>                 // è¿™æ˜¯ä¿å­˜åœ¨ Debug æ¨¡å¼ä¸­èƒ½çœ‹åˆ°çš„ä¿¡æ¯ï¼Œå…·ä½“æ€ä¹ˆæŸ¥çœ‹ï¼Œä½ å¯ä»¥å»çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„æºç 
>                 view.saveAttributeDataForStyleable(
>                     view.context, styleableId, attrs, ty, defStyleAttr, defStyleRes)
>             }
>             try {
>                 return Typedef(ty, view.context).func()
>             } finally {
>                 ty.recycle()
>             }
>         }
>     }
> 
>     class Typedef(val ty: TypedArray, private val context: Context) {
>         fun Int.int(defValue: Int): Int = this.int(ty, defValue)
>         fun Int.color(defValue: Int): Int = this.color(ty, defValue)
>         fun Int.colorById(@ColorRes defValueId: Int): Int = this.color(
>             ContextCompat.getColor(context, defValueId))
>         fun Int.dimens(defValue: Int): Int = this.dimens(ty, defValue)
>         fun Int.dimens(defValue: Float): Float = this.dimens(ty, defValue)
>         fun Int.layoutDimens(defValue: Int): Int = this.layoutDimens(ty, defValue)
>         fun Int.dimensById(@DimenRes defValueId: Int): Int = this
>         .dimens(context.resources.getDimensionPixelSize(defValueId))
>         fun Int.string(defValue: String? = null): String = this.string(ty, defValue)
>         fun Int.boolean(defValue: Boolean): Boolean = this.boolean(ty, defValue)
>         fun Int.float(defValue: Float): Float = this.float(ty, defValue)
>         internal inline fun <reified E: RuntimeException> Int.intOrThrow(
>             attrsName: String): Int = this.intOrThrow<E>(ty, attrsName)
>         internal inline fun <reified E: RuntimeException> Int.stringOrThrow(
>             attrsName: String): String = this.stringOrThrow<E>(ty, attrsName)
>     }
> }
> 
> internal fun Int.int(ty: TypedArray, defValue: Int): Int {
>     return ty.getInt(this, defValue)
> }
> 
> internal fun Int.color(ty: TypedArray, defValue: Int): Int {
>     return ty.getColor(this, defValue)
> }
> 
> internal fun Int.dimens(ty: TypedArray, defValue: Int): Int {
>     return ty.getDimensionPixelSize(this, defValue)
> }
> 
> internal fun Int.dimens(ty: TypedArray, defValue: Float): Float {
>     return ty.getDimension(this, defValue)
> }
> 
> internal fun Int.layoutDimens(ty: TypedArray, defValue: Int): Int {
>     return ty.getLayoutDimension(this, defValue)
> }
> 
> internal fun Int.string(ty: TypedArray, defValue: String? = null): String {
>     return ty.getString(this) ?: defValue ?: ""
> }
> 
> internal fun Int.boolean(ty: TypedArray, defValue: Boolean): Boolean {
>     return ty.getBoolean(this, defValue)
> }
> 
> internal fun Int.float(ty: TypedArray, defValue: Float): Float {
>     return ty.getFloat(this, defValue)
> }
> 
> internal inline fun <reified E: RuntimeException> Int.intOrThrow(
>     ty: TypedArray, attrsName: String
> ): Int {
>     if (!ty.hasValue(this)) {
>         throw E::class.java.getConstructor(String::class.java)
>             .newInstance("å±æ€§ $attrsName æ²¡æœ‰è¢«å®šä¹‰ï¼")
>     }
>     return this.int(ty, 0)
> }
> 
> internal inline fun <reified E: java.lang.RuntimeException> Int.stringOrThrow(
>     ty: TypedArray, attrsName: String
> ): String {
>     if (!ty.hasValue(this)) {
>         throw E::class.java.getConstructor(String::class.java)
>             .newInstance("å±æ€§ $attrsName æ²¡æœ‰è¢«å®šä¹‰ï¼")
>     }
>     return this.string(ty)
> }
> ```
> 
> 
>
> 

### 7ã€onMeasure()

### 8ã€onLayout()

### 9ã€LayoutParams

### 10ã€requestLayout()

> è¿™ä¸œè¥¿è·Ÿå‰é¢çš„ `invalidate()` ä¸€æ ·ï¼Œä½ ä»¬åªéœ€è¦è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š
>
> - è°ƒç”¨åä¼šåœ¨ä¸‹ä¸€å¸§å›è°ƒ `onMeasure()` å’Œ `onMeasure()` è¿›è¡Œé‡æ–°æµ‹é‡å’Œå¸ƒå±€
> - å¦‚æœä½ çš„ View å¤§å°å‘ç”Ÿæ”¹å˜ï¼Œå®ƒè¿˜ä¼šè°ƒç”¨ `onDraw()` è¿›è¡Œåˆ·æ–°
>
> æ–‡ç« çš„è¯ï¼Œä¸ `invalidate()` çš„ä¸€æ ·ï¼šhttps://juejin.cn/post/7017452765672636446

### 11ã€å‘å¸ƒå¼€æºåº“

### 12ã€åˆ†äº«ä¸€äº›ä¸œè¥¿

> è°æƒ³å†™è‡ªå®šä¹‰ View å•Šï¼Œä½ æƒ³å†™å—ï¼Ÿæ­£ç»äººå†™ä»€ä¹ˆè‡ªå®šä¹‰ Viewã€‚
>
> è‡ªå®šä¹‰ View ç¡®å®å¾ˆéš¾ï¼Œä¸œè¥¿åˆå¤šåˆæ‚ï¼Œåœ¨è€ƒè™‘å†™è‡ªå®šä¹‰ View ä¹‹å‰ï¼Œè¯·å…ˆæœç´¢ä¸€ä¸‹æ˜¯å¦æœ‰åˆ«äººå·²ç»é€ å¥½çš„è½®å­ï¼Œæœ‰è½®å­ç›´æ¥ç”¨ï¼Œä»–ä¸é¦™å—ï¼Ÿ[ç‹—å¤´]
>
> è¿™é‡Œåˆ†äº«ä¸€äº›è½®å­ï¼š
>
> ### 1ã€Material Design å®˜ç½‘
>
> > å®˜ç½‘é“¾æ¥ï¼šhttps://material.io/
> >
> > æºç åœ°å€ï¼šhttps://github.com/material-components/material-components-android
> >
> > ç¤ºä¾‹ä¸‹è½½ï¼šhttps://github.com/material-components/material-components-android/releases
> >
> > è¿™é‡Œé¢çš„éƒ½ç®—å®˜æ–¹æ§ä»¶ï¼Œè€Œä¸”æœ‰å¾ˆå¤šï¼Œå¦‚æœæƒ³å®ç°æŸä¸ªåŠŸèƒ½æ—¶å¯ä»¥å»çœ‹çœ‹æ˜¯å¦å·²ç»æœ‰å®ç°äº†çš„ï¼Œä»–è¿˜ä¸“é—¨å†™äº†ä¸€ä¸ªå®ä¾‹ appï¼Œå¯ä»¥ä¸‹ä¸‹æ¥çœ‹çœ‹ï¼Œæ‰¾åˆ°æƒ³è¦çš„å†å»çœ‹ä»–çš„æºç 
>
> ### 2ã€View#post()ã€posyDelay()
>
> ### 3ã€View çš„ç”Ÿå‘½å‘¨æœŸ
>
> > ç”Ÿå‘½å‘¨æœŸ
> >
> > å¦‚ä½•ç›‘å¬ View è¢« remove
>
> ### 4ã€è‡ªå®šä¹‰ View çš„ä¸€äº›è§„èŒƒ

## äºŒã€åŠ¨ç”»